import numpy as np

import serial

import time

waitTime = 0.1

songs=np.array([[
    261, 261, 392, 392, 440, 440, 392,

    349, 349, 330, 330, 294, 294, 261,

    392, 392, 349, 349, 330, 330, 294,

    392, 392, 349, 349, 330, 330, 294,

    261, 261, 392, 392, 440, 440, 392,

    349, 349, 330, 330, 294, 294, 261,

    0, 0, 0, 0, 0, 0, 0],
    [
    392, 329, 329, 349, 293, 293, 261,

    293, 329, 349, 392, 392, 392, 392,
    
    329, 329, 349, 293, 293, 261, 329,
    
    392, 392, 329,
    
    293, 293, 293, 293, 293, 329, 349,
    
    329, 329, 329, 329, 329, 349, 392,
    
    392, 329, 329, 349, 293, 293, 261, 
    
    329, 392, 392, 261        
    ],
    [
    261, 293, 329, 261, 261, 293, 329,

    261, 329, 349, 392, 329, 349, 392,

    392, 440, 392, 349, 329, 261 ,392,
    
    440, 392, 349, 329, 261, 293, 196,

    261, 293, 196, 261, 0, 0, 0,

    0, 0, 0, 0, 0, 0, 0,

    0, 0, 0, 0, 0, 0, 0, 
    ]
])
notes=np.array([[1, 1, 1, 1, 1, 1, 2,

    1, 1, 1, 1, 1, 1, 2,

    1, 1, 1, 1, 1, 1, 2,

    1, 1, 1, 1, 1, 1, 2,

    1, 1, 1, 1, 1, 1, 2,

    1, 1, 1, 1, 1, 1, 2,

    1, 1, 1, 1, 1, 1, 1],
    [ 1, 1, 1, 1, 1, 1, 1,

    1, 1, 1, 1, 1, 1, 1,

    1, 1, 1, 1, 1, 1, 1,

    1, 1, 3, 
  
    1, 1, 1, 1, 1, 1, 1,
  
    1, 1, 1, 1, 1, 1, 1, 
  
    1, 1, 1, 1, 1, 1, 1,

    1, 1, 1, 3  ],
    [1, 1, 1, 1, 1, 1, 1,

    1, 1, 1, 1, 1, 1, 1,

    1, 1, 1, 1, 1, 1, 1,

    1, 1, 1, 1, 1, 1, 1,

    1, 1, 1, 1, 1, 1, 1,

    1, 1, 1, 1, 1, 1, 1,

    1, 1, 1, 1, 1, 1, 1]
    
    ])
# output formatter
songs=np.reshape(songs,147)
notes=np.reshape(notes,147)
table=np.concatenate([songs,notes])
formatter = lambda x: "%03.0f" % x
# send the waveform table to K66F

serdev = '/dev/ttyACM0'

s = serial.Serial(serdev)

print("Sending signal ...")

for data in table:
#  print(data)

  s.write(bytes(formatter(data), 'UTF-8'))

  time.sleep(waitTime)

s.close()

print("Signal sended")